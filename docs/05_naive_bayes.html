<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.21">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Naïve Bayes – Data Science Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea1d7ac60288e0f1efdbc993fd8432ae.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-e31584831b205ffbb2d98406f31c2a5b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Data Science Project</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./01_introduction.html"> 
<span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-dataprepeda" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">DataPrep/EDA</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-dataprepeda">    
        <li>
    <a class="dropdown-item" href="./02_01_overview.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./02_02_data_gathering_and_cleaning.html">
 <span class="dropdown-text">Data Gathering and Data Cleaning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./02_03_data_visualization.html">
 <span class="dropdown-text">Data Visualization</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-modelmethod" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Model/Method</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-modelmethod">    
        <li>
    <a class="dropdown-item" href="./03_clustering.html">
 <span class="dropdown-text">Clustering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./04_pca.html">
 <span class="dropdown-text">Principal Component Analysis (PCA)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./05_naive_bayes.html">
 <span class="dropdown-text">Naïve Bayes</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./06_decision_trees.html">
 <span class="dropdown-text">Decision Trees</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./11_boosting.html">
 <span class="dropdown-text">Boosting</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./12_results.html"> 
<span class="menu-text">Results</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./13_project_challenges.html"> 
<span class="menu-text">Project Challenges</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./10_conclusions.html"> 
<span class="menu-text">Conclusions</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/taso5789/ds-project-portfolio"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/taihei-sone-586102253/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a>
  <ul class="collapse">
  <li><a href="#the-naïve-bayes-nb-classifier" id="toc-the-naïve-bayes-nb-classifier" class="nav-link" data-scroll-target="#the-naïve-bayes-nb-classifier">The Naïve Bayes (NB) Classifier</a></li>
  <li><a href="#multinomial-naïve-bayes" id="toc-multinomial-naïve-bayes" class="nav-link" data-scroll-target="#multinomial-naïve-bayes">Multinomial Naïve Bayes</a></li>
  <li><a href="#bernoulli-naïve-bayes" id="toc-bernoulli-naïve-bayes" class="nav-link" data-scroll-target="#bernoulli-naïve-bayes">Bernoulli Naïve Bayes</a></li>
  </ul></li>
  <li><a href="#data-prep" id="toc-data-prep" class="nav-link" data-scroll-target="#data-prep">Data Prep</a>
  <ul class="collapse">
  <li><a href="#training-and-test-data-for-yoy-inflation-prediction" id="toc-training-and-test-data-for-yoy-inflation-prediction" class="nav-link" data-scroll-target="#training-and-test-data-for-yoy-inflation-prediction">Training and Test Data for YoY Inflation Prediction</a></li>
  <li><a href="#training-and-test-data-for-mom-inflation-prediction" id="toc-training-and-test-data-for-mom-inflation-prediction" class="nav-link" data-scroll-target="#training-and-test-data-for-mom-inflation-prediction">Training and Test Data for MoM Inflation Prediction</a></li>
  <li><a href="#training-and-test-data-for-unemployment-rates" id="toc-training-and-test-data-for-unemployment-rates" class="nav-link" data-scroll-target="#training-and-test-data-for-unemployment-rates">Training and Test Data for Unemployment Rates</a></li>
  </ul></li>
  <li><a href="#code" id="toc-code" class="nav-link" data-scroll-target="#code">Code</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a>
  <ul class="collapse">
  <li><a href="#confusion-matrix-for-yoy-inflation-prediction" id="toc-confusion-matrix-for-yoy-inflation-prediction" class="nav-link" data-scroll-target="#confusion-matrix-for-yoy-inflation-prediction">Confusion Matrix for YoY Inflation Prediction</a></li>
  <li><a href="#confusion-matrix-for-mom-inflation-prediction" id="toc-confusion-matrix-for-mom-inflation-prediction" class="nav-link" data-scroll-target="#confusion-matrix-for-mom-inflation-prediction">Confusion Matrix for MoM Inflation Prediction</a></li>
  <li><a href="#confusion-matrix-for-unemployment-rates-prediction" id="toc-confusion-matrix-for-unemployment-rates-prediction" class="nav-link" data-scroll-target="#confusion-matrix-for-unemployment-rates-prediction">Confusion Matrix for Unemployment Rates Prediction</a></li>
  <li><a href="#related-to-q5-out-of-10-research-questions-in-introduction" id="toc-related-to-q5-out-of-10-research-questions-in-introduction" class="nav-link" data-scroll-target="#related-to-q5-out-of-10-research-questions-in-introduction">Related to Q5 (out of 10 Research Questions) in Introduction</a></li>
  </ul></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions">Conclusions</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Naïve Bayes</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="overview" class="level1">
<h1>Overview</h1>
<section id="the-naïve-bayes-nb-classifier" class="level2">
<h2 class="anchored" data-anchor-id="the-naïve-bayes-nb-classifier">The Naïve Bayes (NB) Classifier</h2>
<div class="justify">
<ul>
<li><p>Naïve Bayes is a simple yet powerful <strong>probabilistic classification algorithm</strong> based on <strong>Bayes’ Theorem</strong>. It performs especially well in tasks like text classification (e.g., spam filters) and medical diagnosis.</p></li>
<li><p>The word “<strong>naïve</strong>” in its name comes from the very simple, yet powerful, assumption the algorithm makes: that <strong>all features are independent of one another</strong>.</p></li>
<li><p>For example, if an email contains the words “congratulations” and “free,” Naïve Bayes treats the probability of “congratulations” appearing and the probability of “free” appearing as two separate, independent events that do not influence each other. In reality, these words are often related, but this “naïve assumption” greatly simplifies the computation and works very effectively in many cases.</p></li>
</ul>
</div>
<div class="justify">
<div class="columns">
<div class="column" style="width:47.5%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/fig_05_overview_01.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>This image shows how the Naïve Bayes classifier uses <strong>Bayes’ Theorem</strong> (top) with a <strong>“naïve” assumption</strong> (bottom) that all features are independent, simplifying the calculation. Source: <a href="https://uc-r.github.io/naive_bayes" target="_blank">UC Business Analytics R Programming Guide</a></figcaption>
</figure>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:47.5%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/fig_05_overview_02.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>This diagram shows how a spam filter works. A <strong>classifier</strong>, often powered by an algorithm like <strong>Naïve Bayes</strong>, analyzes incoming emails and automatically sorts them into the <strong>INBOX</strong> for legitimate mail and the <strong>SPAM FOLDER</strong> for junk mail. Source: <a href="https://developers.google.com/machine-learning/guides/text-classification" target="_blank">Google Developers</a></figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="multinomial-naïve-bayes" class="level2">
<h2 class="anchored" data-anchor-id="multinomial-naïve-bayes">Multinomial Naïve Bayes</h2>
<div class="justify">
<ul>
<li><p><strong>Multinomial Naïve Bayes</strong> is a model that is particularly effective when features represent <strong>counts or frequencies</strong>. Text classification is a classic example.</p></li>
<li><p><strong>Definition:</strong> It assumes that each feature (e.g., each word in a document) is drawn from a multinomial distribution. This is a model for counting how many times an event occurred.</p></li>
<li><p><strong>Explanation:</strong> Taking email classification as an example, Multinomial NB calculates the probability that an email is spam based on the <strong>frequency of words</strong> like “congratulations,” “sale,” or “urgent.” The feature values are discrete counts, such as 0, 1, 2, 3, and so on.</p></li>
</ul>
<blockquote class="blockquote">
<p><strong>Use Cases:</strong></p>
<ul>
<li><p><strong>Spam Filtering:</strong> Classifying an email as spam or not based on the frequency of words it contains.</p></li>
<li><p><strong>Document Classification:</strong> Categorizing news articles into topics like “sports,” “business,” or “politics.”</p></li>
</ul>
</blockquote>
</div>
</section>
<section id="bernoulli-naïve-bayes" class="level2">
<h2 class="anchored" data-anchor-id="bernoulli-naïve-bayes">Bernoulli Naïve Bayes</h2>
<div class="justify">
<ul>
<li><p><strong>Bernoulli Naïve Bayes</strong> is a model used when features are <strong>binary</strong> (i.e., they take one of two values, like “yes” or “no”).</p></li>
<li><p><strong>Definition:</strong> It assumes that each feature is drawn from a Bernoulli distribution (a trial with only two outcomes, like a coin flip).</p></li>
<li><p><strong>Explanation:</strong> Using text classification as an example again, while Multinomial NB counts word <em>occurrences</em>, Bernoulli NB only considers the <strong>presence (1) or absence (0)</strong> of a specific word in a document. Whether a word appears 10 times or just once, Bernoulli NB treats it as “1” (present).</p></li>
</ul>
<blockquote class="blockquote">
<p><strong>Use Cases:</strong></p>
<ul>
<li><p><strong>Text Classification:</strong> Classifying documents based on whether or not they contain specific keywords.</p></li>
<li><p><strong>Sentiment Analysis:</strong> Determining if a review is positive or negative based on the presence of words like “excellent” or “terrible.”</p></li>
</ul>
</blockquote>
</div>
</section>
</section>
<section id="data-prep" class="level1">
<h1>Data Prep</h1>
<div class="justify">
<ul>
<li><p>The fundamental prerequisite for building a supervised learning model is the use of <strong>“labeled data.”</strong> This refers to a dataset where each data point is provided with a “correct answer” or label in advance. For example, this could be email data where each message is labeled as either “Spam” or “Not Spam.” The model uses these correct labels as a target to learn patterns within the data.</p></li>
<li><p>Furthermore, to fairly evaluate the model’s performance on new, unseen data, the dataset is split into a <strong>Training Set</strong> and a <strong>Testing Set</strong>. This division prevents <strong>“overfitting,”</strong> where the model simply memorizes the training data, and allows for a proper measurement of its ability to generalize.</p>
<ul>
<li><strong>Training Set</strong>: The majority of the dataset, used for the model to learn the patterns and relationships in the data.</li>
<li><strong>Testing Set</strong>: A portion of the data held back from the training process, used only to verify the final performance of the trained model.</li>
</ul></li>
<li><p>The training and testing data must be <strong>disjoint</strong> sets, meaning they have no data points in common. The reason is to get an honest evaluation of the model’s ability to generalize to new, unseen data. If the sets overlap, the model is being tested on data it has already “seen” during training, which would be like giving a student an exam with questions they had already memorized. Keeping the training and testing sets <strong>disjoint</strong> is the only way to get a true measure of the model’s predictive performance.</p></li>
<li><p>The sample image of the data used in the analysis on this page is shown below. This dataset corresponds to the one shown in “Merged Cleaned Data” at the end of <a href="./02_02_data_gathering_and_cleaning.html">Data Gathering and Data Cleaning</a>. The dataset can be found <a href="https://github.com/taso5789/ds-project-portfolio/tree/main/data/df_merged.csv">here</a>.</p>
<ul>
<li>For this analysis, the target variables—inflation rates (<code>PCEPILFE_YoY</code>, <code>PCEPILFE_MoM</code>) and the unemployment rate (<code>UNRATE</code>)—were binarized to apply the Naïve Bayes classifier. The historical median of each variable was used as a threshold; periods with values above the median were defined as “High Inflation” or “High Unemployment” (1), and all others as “Low” (0).</li>
</ul></li>
</ul>
</div>
<div class="text-center">
<p><img src="results/4_Naive_Bayes/data.jpg" class="img-fluid" style="width:100.0%"></p>
</div>
<div class="justify">
<ul>
<li>The training and testing data used to predict the year-over-year (YoY) inflation (<code>high_inflation_YoY</code> derived from <code>PCEPILFE_YoY</code>), month-over-month (MoM) inflation (<code>high_inflation_MoM</code> derived from <code>PCEPILFE_MoM</code>), and unemployment rates (<code>high_unemployment</code> derived from <code>UNRATE</code>) are shown in <a href="#fig-inf-YoY-train" class="quarto-xref">Figure&nbsp;1</a> ~ <a href="#fig-unemp-test" class="quarto-xref">Figure&nbsp;6</a>, respectively. Each dataset was created as follows:</li>
</ul>
</div>
<section id="training-and-test-data-for-yoy-inflation-prediction" class="level2">
<h2 class="anchored" data-anchor-id="training-and-test-data-for-yoy-inflation-prediction">Training and Test Data for YoY Inflation Prediction</h2>
<div class="justify">
<ol type="1">
<li><p><strong>Feature Engineering</strong>: <strong>Lag variables</strong> (from 1 to 13 months prior) were added for each economic indicator to expand the feature set.</p></li>
<li><p><strong>Defining Predictors and Target</strong>: The binarized YoY inflation rate (<code>high_inflation_YoY</code>) was set as the target variable (y). All other potential target variables regarding inflation and unemployment were excluded from the feature set (X) to prevent data leakage.</p></li>
<li><p><strong>Data Splitting</strong>: The dataset was divided into a <strong>70% training set</strong> and a <strong>30% testing set</strong> using stratified sampling to ensure the class proportions were identical in both sets.</p></li>
<li><p><strong>Selective Scaling</strong>: <strong>Only continuous variables were standardized</strong> using <code>StandardScaler</code>, while dummy variables (e.g., for recessions) were excluded from this process. The scaler was fit on the training data and then applied to the test data to prevent data leakage.</p></li>
</ol>
</div>
<div class="justify">
<div class="columns">
<div class="column" style="width:47.5%;">
<div id="fig-inf-YoY-train" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-inf-YoY-train-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="results/4_Naive_Bayes/inflation_YoY_train_data.jpg" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-inf-YoY-train-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: The Training Data for YoY Inflation
</figcaption>
</figure>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:47.5%;">
<div id="fig-inf-YoY-test" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-inf-YoY-test-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="results/4_Naive_Bayes/inflation_YoY_test_data.jpg" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-inf-YoY-test-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: The Test Data for YoY Inflation
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="training-and-test-data-for-mom-inflation-prediction" class="level2">
<h2 class="anchored" data-anchor-id="training-and-test-data-for-mom-inflation-prediction">Training and Test Data for MoM Inflation Prediction</h2>
<div class="justify">
<ol type="1">
<li><p><strong>Feature Engineering</strong>: To capture past trends and volatility, <strong>8-month rolling window statistics</strong> (e.g., mean, standard deviation) were calculated for key economic indicators and added as features. For this specific model, no lag variables were used.</p></li>
<li><p><strong>Defining Predictors and Target</strong>: The binarized MoM inflation rate (<code>high_inflation_MoM</code>) was set as the target variable (y). All other potential target variables regarding inflation and unemployment were excluded from the feature set (X) to prevent data leakage.</p></li>
<li><p><strong>Data Splitting</strong>: The dataset was divided into a <strong>70% training set</strong> and a <strong>30% testing set</strong> using stratified sampling to ensure the class proportions were identical in both sets.</p></li>
<li><p><strong>Selective Scaling</strong>: <strong>Only continuous variables were standardized</strong> using <code>StandardScaler</code>, while dummy variables (e.g., for recessions) were excluded from this process. The scaler was fit on the training data and then applied to the test data to prevent data leakage.</p></li>
<li><p><strong>Oversampling the Training Data</strong>: To address the difficulty of classifying the “High Inflation” periods, the training data was resampled using <strong>SMOTE</strong>. A custom sampling strategy was employed to oversample the minority class to be <strong>twice the size of the majority class</strong>, compelling the model to learn its characteristics more thoroughly. This resampling was applied <em>only</em> to the training set.</p></li>
</ol>
</div>
<div class="justify">
<div class="columns">
<div class="column" style="width:47.5%;">
<div id="fig-inf-MoM-train" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-inf-MoM-train-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="results/4_Naive_Bayes/inflation_MoM_train_data.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-inf-MoM-train-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: The Training Data for MoM Inflation
</figcaption>
</figure>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:47.5%;">
<div id="fig-inf-MoM-test" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-inf-MoM-test-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="results/4_Naive_Bayes/inflation_MoM_test_data.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-inf-MoM-test-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: The Test Data for MoM Inflation
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="training-and-test-data-for-unemployment-rates" class="level2">
<h2 class="anchored" data-anchor-id="training-and-test-data-for-unemployment-rates">Training and Test Data for Unemployment Rates</h2>
<div class="justify">
<ol type="1">
<li><p><strong>Feature Engineering</strong>: To capture past trends and volatility, <strong>12-month rolling window statistics</strong> (e.g., mean, standard deviation) were calculated for key economic indicators and added as features. For this specific model, no lag variables were used.</p></li>
<li><p><strong>Defining Predictors and Target</strong>: The binarized unemployment rate (<code>high_unemployment</code>) was set as the target variable (y). All other potential target variables regarding inflation and unemployment were excluded from the feature set (X) to prevent data leakage.</p></li>
<li><p><strong>Data Splitting</strong>: The dataset was divided into a <strong>70% training set</strong> and a <strong>30% testing set</strong> using stratified sampling to ensure the class proportions were identical in both sets.</p></li>
<li><p><strong>Selective Scaling</strong>: <strong>Only continuous variables were standardized</strong> using <code>StandardScaler</code>, while dummy variables (e.g., for recessions) were excluded from this process. The scaler was fit on the training data and then applied to the test data to prevent data leakage.</p></li>
</ol>
</div>
<div class="justify">
<div class="columns">
<div class="column" style="width:47.5%;">
<div id="fig-unemp-train" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-unemp-train-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="results/4_Naive_Bayes/unemp_train_data.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-unemp-train-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: The Training Data for Unemployment Rates
</figcaption>
</figure>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:47.5%;">
<div id="fig-unemp-test" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-unemp-test-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="results/4_Naive_Bayes/unemp_test_data.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-unemp-test-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: The Test Data for Unemployment Rates
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="code" class="level1">
<h1>Code</h1>
<div class="justify">
<ul>
<li>For the code used in this chapter (Naïve Bayes), please refer <a href="https://github.com/taso5789/ds-project-portfolio/blob/main/code/4_Naive_Bayes.ipynb">here</a>.</li>
</ul>
</div>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<section id="confusion-matrix-for-yoy-inflation-prediction" class="level2">
<h2 class="anchored" data-anchor-id="confusion-matrix-for-yoy-inflation-prediction">Confusion Matrix for YoY Inflation Prediction</h2>
<div class="justify">
<ul>
<li><p><strong>Accuracy</strong>: <strong>86.4%</strong></p></li>
<li><p>This is a <strong>strong and well-balanced model</strong>. Its key strength is a very high <strong>recall for “Low Inflation” (94%)</strong>, meaning it is excellent at correctly identifying low inflation periods.</p></li>
<li><p>The model is also very reliable when it predicts high inflation (<strong>precision of 92%</strong>). Its main weakness is a slightly lower <strong>recall for “High Inflation” (77%)</strong>, indicating it occasionally misses identifying a high inflation period. Overall, its performance is robust.</p></li>
</ul>
</div>
<div class="justify">
<div id="fig-inf-YoY-matrix" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-inf-YoY-matrix-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="results/4_Naive_Bayes/inflation_YoY_confusion_matrix.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-inf-YoY-matrix-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Confusion Matrix for YoY Inflation Prediction
</figcaption>
</figure>
</div>
</div>
</section>
<section id="confusion-matrix-for-mom-inflation-prediction" class="level2">
<h2 class="anchored" data-anchor-id="confusion-matrix-for-mom-inflation-prediction">Confusion Matrix for MoM Inflation Prediction</h2>
<div class="justify">
<ul>
<li><p><strong>Accuracy</strong>: <strong>70.6%</strong></p></li>
<li><p>This model’s performance is mixed. Its main strength is a high <strong>recall (86%)</strong> for “Low Inflation,” meaning it is effective at identifying low inflation periods.</p></li>
<li><p>However, its primary weakness is a low <strong>recall (55%)</strong> for the “High Inflation” class, indicating that it fails to detect a significant portion (45%) of the actual high inflation periods. While its precision for predicting “High Inflation” is solid (<strong>78%</strong>), the model is clearly more skilled at identifying low inflation than high inflation.</p></li>
</ul>
</div>
<div class="justify">
<div id="fig-inf-MoM-matrix" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-inf-MoM-matrix-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="results/4_Naive_Bayes/inflation_MoM_confusion_matrix.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-inf-MoM-matrix-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: Confusion Matrix for MoM Inflation Prediction
</figcaption>
</figure>
</div>
</div>
</section>
<section id="confusion-matrix-for-unemployment-rates-prediction" class="level2">
<h2 class="anchored" data-anchor-id="confusion-matrix-for-unemployment-rates-prediction">Confusion Matrix for Unemployment Rates Prediction</h2>
<div class="justify">
<ul>
<li><p><strong>Accuracy</strong>: <strong>86.4%</strong></p></li>
<li><p>This is a <strong>strong and reliable model</strong>. Its most notable strengths are its <strong>perfect recall (100%)</strong> for “Low Unemployment” and its <strong>perfect precision (100%)</strong> for “High Unemployment.” This means the model never misclassifies a low unemployment period and its predictions of high unemployment are never wrong.</p></li>
<li><p>The model’s main weakness is a good but not perfect <strong>recall for “High Unemployment” (72%)</strong>, indicating that it fails to detect more than a quarter (~28%) of the high unemployment periods. Overall, despite this, the model is highly accurate and its predictions are very trustworthy.</p></li>
</ul>
</div>
<div class="justify">
<div id="fig-unemp-matrix" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-unemp-matrix-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="results/4_Naive_Bayes/unemp_confusion_matrix.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-unemp-matrix-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: Confusion Matrix for Unemployment Rates Prediction
</figcaption>
</figure>
</div>
</div>
</section>
<section id="related-to-q5-out-of-10-research-questions-in-introduction" class="level2">
<h2 class="anchored" data-anchor-id="related-to-q5-out-of-10-research-questions-in-introduction">Related to Q5 (out of 10 Research Questions) in <a href="./01_introduction.html">Introduction</a></h2>
<div class="justify">
<ul>
<li>Refer to the conclusion below.</li>
</ul>
</div>
</section>
</section>
<section id="conclusions" class="level1">
<h1>Conclusions</h1>
<div class="justify">
<ul>
<li><p>The results of this analysis clearly demonstrate that the performance of the Naïve Bayes model is <strong>extremely dependent on the quality of feature engineering and data preprocessing</strong>.</p>
<ol type="1">
<li><p><strong>Dramatic Performance Improvement via Preprocessing</strong>: The initial, simple model showed low accuracy and a tendency to miss important periods, especially for predicting month-over-month (MoM) inflation. However, after applying advanced preprocessing techniques—including <strong>feature engineering with lag variables and rolling statistics</strong>, as well as <strong>oversampling with SMOTE</strong>—the same Naïve Bayes model achieved a <strong>remarkable improvement in performance</strong>.</p></li>
<li><p><strong>Final High Predictive Accuracy</strong>: Ultimately, the model achieved strong and comparable accuracy scores of <strong>86.4% for both unemployment and year-over-year (YoY) inflation prediction</strong>. The unemployment model was particularly noteworthy, demonstrating exceptional reliability by achieving <strong>perfect precision (100%)</strong> for its “high unemployment” predictions and <strong>perfect recall (100%)</strong> for “low unemployment” periods.</p></li>
<li><p><strong>Remaining Challenges</strong>: On the other hand, predicting the noisy, short-term MoM inflation rate remained a challenge (with 70.6% accuracy), suggesting limitations stemming from the model’s fundamental assumption of feature independence.</p></li>
</ol></li>
<li><p><strong>In summary</strong>, while Naïve Bayes is often considered a simple baseline, this analysis concludes that <strong>it can be transformed into a powerful and high-accuracy tool for identifying macroeconomic regimes, provided it is supported by robust feature engineering and data preprocessing</strong>. The results confirm that the quality of the input features was a more critical factor in determining predictive accuracy than the initial complexity of the model.</p></li>
</ul>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/taso5789\.github\.io\/ds-project-portfolio\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>